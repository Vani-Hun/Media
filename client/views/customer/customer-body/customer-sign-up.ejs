<div class="container2">
    <div class="form-container">
        <p class="title">Register</p>
        <% if (message) { %>
            <div class="alert-primary" role="alert">
                <%= message %>
            </div>
            <% } %>
                <form class="form" id="registration-form" method="POST" action="/customer/sign-up">
                    <div class="input-group">
                        <label for="username">Username</label>
                        <input type="text" name="username" id="username" placeholder="" required>
                        <div class="error-message" id="username-error"></div>
                    </div>

                    <div class="input-group">
                        <label for="password">Password</label>
                        <input type="password" name="password" id="password" placeholder="" required>
                        <div class="error-message" id="password-error"></div>
                    </div>
                    <div class="input-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" name="confirm_password" id="confirm-password" placeholder="" required>
                        <div class="error-message" id="confirm-password-error"></div>
                    </div>
                    <button class="sign" type="submit">Sign up</button>
                </form>
                <!-- Các nút đăng nhập bằng tài khoản mạng xã hội -->
                <div class="social-message">
                    <!-- Các nút xã hội và thông điệp -->
                </div>
                <div class="signup">Already have an account?
                    <a rel="noopener noreferrer" href="/customer/sign-in" class="">Log in</a>
                </div>
    </div>
</div>


<script>
    // Đoạn mã JavaScript để xử lý phản hồi từ máy chủ và hiển thị thông báo lỗi
    document.addEventListener('DOMContentLoaded', function () {
        const messageElement = document.querySelector('.alert-primary');
        console.log("messageElement:", messageElement)
        // Kiểm tra xem có thông báo lỗi hay không
        if (messageElement.textContent.trim() !== '') {
            // Nếu có thông báo lỗi, hiển thị div chứa thông báo
            messageElement.style.display = 'block';
            messageElement.style.color = 'red';
        }

    });

    document.addEventListener("DOMContentLoaded", function () {
        var registrationForm = document.getElementById('registration-form');
        var usernameInput = document.getElementById('username');
        var passwordInput = document.getElementById('password');
        var confirmPasswordInput = document.getElementById('confirm-password');
        var usernameError = document.getElementById('username-error');
        var passwordError = document.getElementById('password-error');
        var confirmPasswordError = document.getElementById('confirm-password-error');

        registrationForm.addEventListener('submit', function (event) {
            var isValid = true;

            if (!validateUsername()) {
                isValid = false;
            }

            if (!validatePassword()) {
                isValid = false;
            }

            if (!validateConfirmPassword()) {
                isValid = false;
            }

            if (!isValid) {
                event.preventDefault();
            }
        });

        usernameInput.addEventListener('input', validateUsername);
        passwordInput.addEventListener('input', validatePassword);
        confirmPasswordInput.addEventListener('input', validateConfirmPassword);

        function validateUsername() {
            var usernameValue = usernameInput.value.trim();
            if (usernameValue.length === 0) {
                usernameError.textContent = 'Username is required.';
                return false;
            } else {
                usernameError.textContent = '';
                return true;
            }
        }

        function validatePassword() {
            var passwordValue = passwordInput.value.trim();
            if (passwordValue.length < 6) {
                passwordError.textContent = 'Password must be at least 6 characters.';
                return false;
            } else {
                passwordError.textContent = '';
                return true;
            }
        }

        function validateConfirmPassword() {
            var confirmPasswordValue = confirmPasswordInput.value.trim();
            var passwordValue = passwordInput.value.trim();
            if (confirmPasswordValue !== passwordValue) {
                confirmPasswordError.textContent = 'Passwords do not match.';
                return false;
            } else {
                confirmPasswordError.textContent = '';
                return true;
            }
        }
    });
</script>